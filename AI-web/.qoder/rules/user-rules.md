---
trigger: always_on
alwaysApply: true
---
# 默认规则

1. 请保持对话语言为中文，思考过程中也请保持中文
2. 我的系统为 Windows，终端默认的是 git bash
3. 请在生成代码时添加函数级注释
4. 判断项目是否已经运行成功，已经有端口启动的话，不要再新启服务。
5. 后端返回的数据结构是 {success: true, data: {xxx: []}} ，但前端代码有可能直接访问 response.data.xxx 。实际上应该访问 response.data.data.xxx 。要注意正确处理这种双层嵌套结构。
6. 页面上只要是调用接口的模块，就不要显示模拟数据
7. 关键位置打印日志方便控制台查看日志调试
8. 不要用 Vite 代理配置，如果有的话直接删除
9. 后台写的 api 接口一定不要返回模拟响应
10. 每次写完接口先列出四大元素，最后再测试接口，测试接口最多尝试执行 3 次，如果 3 次还是失败则不用再继续测试，我会手动进行测试
11. 需要修改数据库表结构的话，不要擅自改动，给我修改语句，我自己改
12. 生成的页面上默认图片从这个网站引用https://picsum.photos/
13. 服务端口被占用的话，先关闭端口占用的应用参考命令：
    netstat -ano | findstr :4000
    cmd //c "taskkill /PID 11524 /F"
14. 运行项目后访问地址不要用http://localhost而是用本机网卡ip地址，防止本地回环地址被代理软件接管
15. 确保提交至GitHub，所有中文文本前不包含任何英文内容、空格或标点符号，保持提交信息的完整性和准确性，并使用中文标点符号和格式
16. 使用终端运行时请分开执行每个命令，不要一次性执行多个命令，否则会导致命令执行失败，不得使用&&来执行命令；请使用PowerShell的Invoke-WebRequest来测试API
17. 启动后端时，需要检查是否有端口被占用，若有则需要先关闭占用端口的应用，再启动后端服务。后端启动后，请不要在同一个终端来运行其他命令，服务器启动后不应该在同一个终端运行其他命令，当需要重启服务器时，先检测是否有服务器正在运行，必须先关闭已启动的终端的服务器，然后再新建终端来重启服务器。
18. PowerShell不支持&&操作符，请使用分号分隔命令。
# MCP Interactive Feedback 规则

1. 在任何流程、任务、对话进行时，无论是询问、回复、或完成阶段性任务，皆必须调用 MCP mcp-feedback-enhanced.
2. 每当收到用户反馈，若反馈内容非空，必须再次调用 MCP mcp-feedback-enhanced,并根据反馈内容调整行为。
3. 仅当用户明确表示「结束」或「不再需要交互」时，才可停止调用 MCP mcp-feedback-enhanced，流程才算结束。
4. 除非收到结束指令，否则所有步独都必须重复调用 MCP mcp-feedback-enhanced。
5. 完成任务前，必须使用 MCP mcp-feedback-enhanced.