## 总约定
- 基础前缀：`/api`（不使用版本化前缀）。已在前端配置中使用：Client website/src/services/expenseApi.ts:5
- 认证：除公开接口外，均需 `Authorization: Bearer <token>`
- 响应结构：统一 `{ success: true|false, data: { ... }, message?: string }`，前端读取走 `response.data.data.xxx`
- 错误结构：`{ success: false, error: { code, message, details? } }`

## 客户端页面接口
### 登录/注册/找回密码
- `POST /api/auth/login` 登录（body: email|username, password）
- `POST /api/auth/register` 注册（body: email, password, username, phone, invitation_code）
- `POST /api/auth/logout` 登出
- `POST /api/auth/refresh` 刷新令牌（body: refresh_token）

### 首页/仪表盘 Dashboard
- `GET /api/dashboard/overview` 概览（统计卡片、近期记录）

### 寝室 Dormitory / 成员 Members
- `GET /api/rooms` 寝室列表（query: keyword, page, size）
- `POST /api/rooms` 创建寝室（body: room_name, building, floor, capacity, description）
- `GET /api/rooms/{room_id}` 寝室详情
- `PUT /api/rooms/{room_id}` 更新寝室
- `GET /api/rooms/{room_id}/members` 成员列表
- `POST /api/rooms/{room_id}/members` 添加成员（body: user_id|email）
- `DELETE /api/rooms/{room_id}/members/{user_id}` 移除成员
- `POST /api/rooms/{room_id}/invitation-codes` 生成邀请码（body: max_uses, expires_at）
- `GET /api/rooms/{room_id}/invitation-codes` 邀请码列表
- `POST /api/invitation-codes/validate` 校验邀请码（body: code）

### 费用 Expenses / 分摊 Split
- `GET /api/expenses` 费用列表（query: room_id, status, type, start_date, end_date, page, size）
- `POST /api/expenses` 创建费用（body: title, description, amount, type, expense_date, due_date, room_id）
- `GET /api/expenses/{expense_id}` 费用详情
- `PUT /api/expenses/{expense_id}` 更新费用
- `DELETE /api/expenses/{expense_id}` 删除费用
- `POST /api/expenses/{expense_id}/calculate-splits` 计算分摊（body: calculation_method, custom_splits[], exclude_users[], start_date, end_date）
- `PUT /api/expenses/{expense_id}/splits` 保存分摊结果

### 账单 Bills
- `GET /api/bills` 账单列表（query: room_id, status, period_start, period_end, page, size）
- `POST /api/bills` 创建账单
- `GET /api/bills/{bill_id}` 账单详情
- `PUT /api/bills/{bill_id}` 更新账单
- `DELETE /api/bills/{bill_id}` 删除账单
- `GET /api/bills/{bill_id}/payments` 账单支付记录

### 支付 Payment（功能页、扫码、确认、记录、状态）
- `POST /api/payments` 创建支付记录（body: billId|expense_id, amount, method, remark）
- `GET /api/payments/{payment_id}/status` 查询支付状态
- `GET /api/payments/my` 我的支付记录（query: page, size, status）
- `POST /api/payments/cash` 确认现金支付（body: billId|expense_id, amount, remark）
- `POST /api/payments/qrcode` 获取支付二维码（body: billId|expense_id, amount, method）
- `POST /api/payments/scan` 确认扫码支付（body: billId|expense_id, amount, method, codeId）
- `POST /api/payments/check-status` 检查扫码支付状态（body: billId|expense_id, amount, method）
- `PUT /api/payments/{payment_id}/confirm` 入账确认（body: confirmer_id, note）
- `GET /api/payment-codes` 收款码列表
- `POST /api/payment-codes` 新增收款码（body: type, imageUrl, isActive）
- `PUT /api/payment-codes/{code_id}` 更新收款码
- `DELETE /api/payment-codes/{code_id}` 删除收款码

### 通知 Notifications（系统/费用/设置/渠道）
- `GET /api/notifications` 我的通知列表（query: types[], unread_only?, page, size）
- `PUT /api/notifications/{id}/read` 标记已读
- `DELETE /api/notifications/{id}` 删除通知
- `GET /api/notifications/settings` 获取通知设置
- `PUT /api/notifications/settings` 更新通知设置
- `GET /api/notifications/channels/system` 系统内渠道配置
- `PUT /api/notifications/channels/system` 更新系统内渠道配置
- `GET /api/notifications/channels/email` 邮件渠道配置
- `PUT /api/notifications/channels/email` 更新邮件渠道配置
- `POST /api/notifications/channels/email/send-code` 发送邮箱验证
- `POST /api/notifications/channels/email/verify` 校验邮箱验证码
- `GET /api/notifications/channels/sms` 短信渠道配置
- `PUT /api/notifications/channels/sms` 更新短信渠道配置
- `POST /api/notifications/channels/sms/send-code` 发送短信验证码
- `POST /api/notifications/channels/sms/verify` 校验短信验证码
- `GET /api/notifications/channels/push` 推送渠道配置
- `PUT /api/notifications/channels/push` 更新推送渠道配置

### 个人中心 Profile
- `GET /api/users/profile` 获取个人信息
- `PUT /api/users/profile` 更新个人信息
- `POST /api/users/avatar` 上传头像（form-data: file）

### 安全中心 SecurityCenter
- `PUT /api/security/change-password` 修改密码（body: newPassword）
- `GET /api/security/login-history` 登录历史
- `GET /api/security/2fa/qrcode` 生成双因素二维码/密钥
- `POST /api/security/2fa/enable` 启用双因素（body: verificationCode?）
- `POST /api/security/2fa/verify` 验证双因素（body: code）
- `POST /api/security/2fa/disable` 禁用双因素（body: password）
- `PUT /api/security/login-notification` 更新登录提醒（body: enabled）
- `PUT /api/security/auto-logout` 更新自动登出（body: minutes）
- `GET /api/security/trusted-devices` 受信设备列表
- `POST /api/security/trusted-devices` 添加受信设备
- `DELETE /api/security/trusted-devices/{device_id}` 移除受信设备

### 数据分析 Analytics
- `GET /api/statistics/expenses` 支出统计（query: room_id, period, start_date, end_date, group_by）
- `GET /api/statistics/trends` 趋势分析（query: room_id, metric, period, months）
- `POST /api/statistics/export` 数据导出（body: export_type, format, room_id, start_date, end_date）

## 管理端页面接口
### 用户管理
- `GET /api/admin/users` 用户列表（query: keyword, role, status, page, size）
- `POST /api/admin/users` 创建用户
- `GET /api/admin/users/{user_id}` 用户详情
- `PUT /api/admin/users/{user_id}` 更新用户
- `DELETE /api/admin/users/{user_id}` 删除用户
- `PUT /api/admin/users/{user_id}/role` 调整角色（body: role, room_id?）
- `POST /api/admin/users/import` 导入（form-data: file）
- `POST /api/admin/users/export` 导出（body: filters）

### 寝室管理
- `GET /api/admin/rooms` 寝室列表
- `POST /api/admin/rooms` 创建寝室
- `GET /api/admin/rooms/{room_id}` 寝室详情
- `PUT /api/admin/rooms/{room_id}` 更新寝室
- `GET /api/admin/rooms/{room_id}/members` 成员列表
- `POST /api/admin/rooms/{room_id}/members` 添加成员
- `DELETE /api/admin/rooms/{room_id}/members/{user_id}` 移除成员
- `GET /api/admin/rooms/cross-members` 跨寝室成员视图（query: user_id?）
- `GET /api/admin/rooms/{room_id}/invitation-codes` 邀请码列表
- `POST /api/admin/rooms/{room_id}/invitation-codes` 生成/管理邀请码

### 费用管理
- `GET /api/admin/expenses` 费用记录列表
- `GET /api/admin/expenses/{expense_id}` 费用详情
- `PUT /api/admin/expenses/{expense_id}/review` 审核（body: status, reviewer_id, review_comment）
- `PUT /api/admin/expenses/{expense_id}/share-rule` 分摊规则配置（body: rule_definitions）

### 支付管理
- `GET /api/admin/payment-codes` 收款码列表
- `POST /api/admin/payment-codes` 新增收款码
- `PUT /api/admin/payment-codes/{code_id}` 更新收款码
- `DELETE /api/admin/payment-codes/{code_id}` 删除收款码
- `GET /api/admin/payments` 支付记录监控（query: status, method, room_id, page, size）
- `PUT /api/admin/payments/{payment_id}/confirm` 确认收款
- `PUT /api/admin/payments/{payment_id}/reject` 拒绝异常支付（body: reason）

### 系统配置
- `GET /api/admin/config` 系统配置获取
- `PUT /api/admin/config` 系统配置更新
- `GET /api/admin/fee-types` 费用类型列表
- `POST /api/admin/fee-types` 新增费用类型
- `PUT /api/admin/fee-types/{id}` 更新费用类型
- `DELETE /api/admin/fee-types/{id}` 删除费用类型
- `GET /api/admin/payment/config/wechat` 微信支付配置获取
- `PUT /api/admin/payment/config/wechat` 微信支付配置保存
- `POST /api/admin/payment/config/wechat/test` 微信支付配置测试
- `GET /api/admin/payment/config/alipay` 支付宝配置获取
- `PUT /api/admin/payment/config/alipay` 支付宝配置保存
- `POST /api/admin/payment/config/alipay/test` 支付宝配置测试
- `GET /api/admin/payment/limits` 支付限额配置获取
- `PUT /api/admin/payment/limits` 支付限额配置保存

### 客户端功能管理
- `GET /api/admin/client-features/modules` 功能模块开关获取
- `PUT /api/admin/client-features/modules` 功能模块开关更新
- `GET /api/admin/client-features/releases` 新功能发布列表
- `POST /api/admin/client-features/releases` 新功能发布
- `GET /api/admin/client-features/grayscale` 灰度发布配置获取
- `PUT /api/admin/client-features/grayscale` 灰度发布配置更新
- `GET /api/admin/client-features/permissions` 功能权限获取
- `PUT /api/admin/client-features/permissions` 功能权限更新
- `GET /api/admin/client-features/limits` 使用限制获取
- `PUT /api/admin/client-features/limits` 使用限制更新

### 数据监控中心
- `GET /api/admin/monitoring/realtime` 实时数据
- `GET /api/admin/monitoring/performance` 性能指标
- `GET /api/admin/monitoring/alerts` 告警列表
- `PUT /api/admin/monitoring/alerts/{id}` 告警处理（body: action, note）

### 行为分析
- `GET /api/admin/behavior/login-stats` 登录统计
- `GET /api/admin/behavior/operations` 操作审计
- `GET /api/admin/behavior/reports` 数据报表

### 纠纷处理中心
- `GET /api/admin/disputes` 纠纷列表
- `POST /api/admin/disputes/accept` 受理纠纷（body: complainant_id, description, attachments[]）
- `GET /api/admin/disputes/{id}/evidence` 证据列表
- `POST /api/admin/disputes/{id}/evidence` 上传证据（form-data: files[]）
- `POST /api/admin/disputes/{id}/arbitration` 仲裁决策（body: decision, reason）

### 管理员监督
- `GET /api/admin/supervision/behaviors` 管理员行为监督
- `GET /api/admin/supervision/permissions` 管理员权限列表
- `PUT /api/admin/supervision/permissions/{admin_id}` 权限调整
- `GET /api/admin/supervision/approvals` 操作审批列表
- `PUT /api/admin/supervision/approvals/{id}` 审批决策（body: decision, note）
- `GET /api/admin/supervision/security` 安全监督指标
- `GET /api/admin/supervision/performance` 管理员绩效指标

### 通知管理
- `GET /api/admin/notifications/system` 系统通知列表
- `POST /api/admin/notifications/system` 发送系统通知
- `GET /api/admin/notifications/fees` 费用通知配置获取
- `PUT /api/admin/notifications/fees` 费用通知配置更新
- `GET /api/admin/notifications/personal` 个人通知策略获取
- `PUT /api/admin/notifications/personal` 个人通知策略更新

### 系统维护
- `GET /api/admin/maintenance/database` 数据库信息
- `POST /api/admin/maintenance/database/backup` 数据库备份
- `POST /api/admin/maintenance/database/restore` 数据库恢复（form-data: file）
- `GET /api/admin/maintenance/logs` 系统日志
- `GET /api/admin/maintenance/versions` 版本列表
- `POST /api/admin/maintenance/versions` 发布版本（body: version, notes）
- `GET /api/admin/maintenance/templates` 模板列表
- `POST /api/admin/maintenance/templates` 新增模板
- `PUT /api/admin/maintenance/templates/{id}` 更新模板
- `DELETE /api/admin/maintenance/templates/{id}` 删除模板

## 备注
- 上述接口完全采用 `/api` 前缀，无任何版本化路径；与现有前端调用保持一致（如账单、支付、统计等模块已使用 `/api/...`）
- 若需对齐现有文档中的 `/v1/...`，请将路径直接去除版本段落并映射到以上资源名即可（例如 `/v1/bills` → `/api/bills`）
- 所有列表接口统一支持分页（`page`, `size`）与必要的筛选查询参数